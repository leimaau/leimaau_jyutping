# Rime schema
# encoding: utf-8

schema:
  schema_id: leimaau_jyutping_fourteen
  name: "狸貓粵拼(14鍵)"
  version: "2020.05.11"
  author:
    - LeiMaau <leimaau@qq.com>
  description: |
    採用『香港語言學會粵語拼音方案』
    聲調輸入 q平 v上 x去 （雙擊爲陽調）
    IPA版提供多種字形轉換和提示音爲IPA
    提供四種反查方案，[`]用漢語拼音反查，[x]用五筆畫反查，[v]用倉頡五代反查，[r]用五筆86反查
    PC上按Ctrl+Enter可將提示音上屏，按Ctrl+Shift+Enter可將候選項上屏
    項目主頁 https://github.com/leimaau/leimaau_jyutping
  dependencies:
    - luna_pinyin
    - stroke
    - cangjie5
    - wubi86

switches:
  __include: leimaau_jyutping.schema:/switches

engine:
  __include: leimaau_jyutping.schema:/engine

speller:
  __include: leimaau_jyutping.schema:/speller
  __patch:
      algebra:
        - derive/([123456])//         # 忽略声调
    #    - derive/^([aeiou])/q$1/      # 增加 q 表示喉塞
        - xform/1/q/                  # 陰平
        - xform/4/qq/                 # 陽平
        - xform/2/v/                  # 陰上
        - xform/5/vv/                 # 陽上
        - xform/3/x/                  # 陰去
        - xform/6/xx/                 # 陽去
    #    - derive/^jy?([aeiour])/y$1/  # 容錯 j -> y
    #    - derive/^jyu/yu/             # 容錯 jyu -> yu
    #    - derive/^jyu/ju/             # 容錯 jyu -> ju
        - derive/aa$/a/               # 容錯 aa -> a
    #    - derive/eo([int])$/u$1/      # 容錯 eo(int) -> u(int)
        - derive/dik$/d/              # 快出「的」字
        - derive/oe(ng|k)$/eo$1/      # 容錯 oe(ng|k) -> eo(ng|k)
        - derive/eo([int])$/oe$1/     # 容錯 eo(int) -> oe(int)
        - derive/yu/y/                # 教院式 jyu -> jy，yu -> y
        - derive/eoi$/eoy/            # 教院式 eoi <-> eoy
        - derive/([bpmfdtnlgkhzc])ei$/$1i/        # 模糊 ei -> i
        - derive/([bpmfdtnlhzcs])ou$/$1u/         # 模糊 ou -> u
        - derive/e(ng|k)$/i$1/        # 模糊 e(ng|k) -> i(ng|k)
        - abbrev/^([a-z]).+$/$1/      # 首字母簡拼
        - abbrev/^([a-z]{2}).+$/$1/   # 首2字母簡拼
        - abbrev/^(gw|kw|ng).+$/$1/   # 聲母簡拼
        - derive/([qw])/q/
        - derive/([er])/e/
        - derive/([ty])/t/
        - derive/([ui])/u/
        - derive/([op])/o/
        - derive/([as])/a/
        - derive/([df])/d/
        - derive/([gh])/g/
        - derive/([jk])/j/
        - derive/l/l/
        - derive/([zx])/z/
        - derive/([cv])/c/
        - derive/([bn])/b/
        - derive/m/m/

menu:
  __include: leimaau_jyutping.schema:/menu

translator:
  __include: leimaau_jyutping.schema:/translator
  __patch:
      prism: leimaau_jyutping_fourteen

luna_pinyin:
  __include: leimaau_jyutping.schema:/luna_pinyin

stroke:
  __include: leimaau_jyutping.schema:/stroke

cangjie5:
  __include: leimaau_jyutping.schema:/cangjie5
    
wubi86:
  __include: leimaau_jyutping.schema:/wubi86
    
reverse_lookup:
  __include: leimaau_jyutping.schema:/reverse_lookup

punctuator:
  __include: leimaau_jyutping.schema:/punctuator

key_binder:
  __include: leimaau_jyutping.schema:/key_binder

recognizer:
  __include: leimaau_jyutping.schema:/recognizer

zh_hk:
  __include: leimaau_jyutping.schema:/zh_hk

zh_tw:
  __include: leimaau_jyutping.schema:/zh_tw

zh_jp:
  __include: leimaau_jyutping.schema:/zh_jp

emoji_cn:
  __include: leimaau_jyutping.schema:/emoji_cn
